{"version":3,"sources":["redline.min.js"],"names":["global","factory","module","exports","document","w","Error","window","this","noGlobal","Redline","element","options","defaults","aperture","marks","innerMarks","position","el","jQuery","$el","attributes","_extend","_processMarks","_calculateAngle","_init","noop","defineBridget","$","addOptionMethod","PluginClass","prototype","option","opts","isPlainObject","extend","bridge","namespace","fn","args","slice","call","arguments","i","len","length","elem","instance","data","isFunction","charAt","returnValue","apply","undefined","logError","each","console","message","error","bridget","Array","define","amd","require","vendorPrefix","styles","getComputedStyle","documentElement","pre","join","match","OLink","dom","RegExp","lowercase","css","js","toUpperCase","substr","_","nodify","map","selector","parent","prefix","create","createElement","tagName","className","translate","info","split","isNode","appendChild","Function","node","byClass","class","getElementsByClassName","rotate","angle","style","transform","addClass","classList","indexOf","push","get","key","set","value","obj","index","caption","toString","type","_createSegment","width","loop","wrap","wrap-wrap","mark","mark-wrap","segment","outer","inner","log","getElementsByTagName","innerHTML","getter","noLoop","percentage","handAngle","moveHand","handEl","render","dial","hand","hand-wrap","hand-arrow","hand-center","redline","point"],"mappings":"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","file":"redline.min.js","sourcesContent":["/* !\r\n * Redline\r\n * Cool customizable html gauge\r\n * //github.com/dsblv/redline.js\r\n * by Dmitry Sobolev\r\n */\r\n\r\n\r\n\r\n// Common.js-friendly stuff from jQuery\r\n\r\n(function( global, factory ) {\r\n\r\n    if ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\r\n\r\n        module.exports = global.document ?\r\n            factory( global, true ) :\r\n            function( w ) {\r\n                if ( !w.document ) {\r\n                    throw new Error( \"Redline.js requires a window with a document\" );\r\n                }\r\n                return factory( w );\r\n            };\r\n\r\n    } else {\r\n        factory( global );\r\n    }\r\n\r\n}(typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\r\n\r\n/**\r\n * Bridget makes jQuery widgets\r\n * v1.1.0\r\n * MIT license\r\n */\r\n\r\n( function( window ) {\r\n\r\n'use strict';\r\n\r\n// -------------------------- utils -------------------------- //\r\n\r\nvar slice = Array.prototype.slice;\r\n\r\nfunction noop() {}\r\n\r\n// -------------------------- definition -------------------------- //\r\n\r\nfunction defineBridget( $ ) {\r\n\r\n// bail if no jQuery\r\nif ( !$ ) {\r\n  return;\r\n}\r\n\r\n// -------------------------- addOptionMethod -------------------------- //\r\n\r\n/**\r\n * adds option method -> $().plugin('option', {...})\r\n * @param {Function} PluginClass - constructor class\r\n */\r\nfunction addOptionMethod( PluginClass ) {\r\n  // don't overwrite original option method\r\n  if ( PluginClass.prototype.option ) {\r\n    return;\r\n  }\r\n\r\n  // option setter\r\n  PluginClass.prototype.option = function( opts ) {\r\n    // bail out if not an object\r\n    if ( !$.isPlainObject( opts ) ){\r\n      return;\r\n    }\r\n    this.options = $.extend( true, this.options, opts );\r\n  };\r\n}\r\n\r\n// -------------------------- plugin bridge -------------------------- //\r\n\r\n// helper function for logging errors\r\n// $.error breaks jQuery chaining\r\nvar logError = typeof console === 'undefined' ? noop :\r\n  function( message ) {\r\n    console.error( message );\r\n  };\r\n\r\n/**\r\n * jQuery plugin bridge, access methods like $elem.plugin('method')\r\n * @param {String} namespace - plugin name\r\n * @param {Function} PluginClass - constructor class\r\n */\r\nfunction bridge( namespace, PluginClass ) {\r\n  // add to jQuery fn namespace\r\n  $.fn[ namespace ] = function( options ) {\r\n    if ( typeof options === 'string' ) {\r\n      // call plugin method when first argument is a string\r\n      // get arguments for method\r\n      var args = slice.call( arguments, 1 );\r\n\r\n      for ( var i=0, len = this.length; i < len; i++ ) {\r\n        var elem = this[i];\r\n        var instance = $.data( elem, namespace );\r\n        if ( !instance ) {\r\n          logError( \"cannot call methods on \" + namespace + \" prior to initialization; \" +\r\n            \"attempted to call '\" + options + \"'\" );\r\n          continue;\r\n        }\r\n        if ( !$.isFunction( instance[options] ) || options.charAt(0) === '_' ) {\r\n          logError( \"no such method '\" + options + \"' for \" + namespace + \" instance\" );\r\n          continue;\r\n        }\r\n\r\n        // trigger method with arguments\r\n        var returnValue = instance[ options ].apply( instance, args );\r\n\r\n        // break look and return first value if provided\r\n        if ( returnValue !== undefined ) {\r\n          return returnValue;\r\n        }\r\n      }\r\n      // return this if no return value\r\n      return this;\r\n    } else {\r\n      return this.each( function() {\r\n        var instance = $.data( this, namespace );\r\n        if ( instance ) {\r\n          // apply options & init\r\n          instance.option( options );\r\n          instance._init();\r\n        } else {\r\n          // initialize new instance\r\n          instance = new PluginClass( this, options );\r\n          $.data( this, namespace, instance );\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n}\r\n\r\n// -------------------------- bridget -------------------------- //\r\n\r\n/**\r\n * converts a Prototypical class into a proper jQuery plugin\r\n *   the class must have a ._init method\r\n * @param {String} namespace - plugin name, used in $().pluginName\r\n * @param {Function} PluginClass - constructor class\r\n */\r\n$.bridget = function( namespace, PluginClass ) {\r\n  addOptionMethod( PluginClass );\r\n  bridge( namespace, PluginClass );\r\n};\r\n\r\nreturn $.bridget;\r\n\r\n}\r\n\r\n// transport\r\nif ( typeof define === 'function' && define.amd ) {\r\n  // AMD\r\n  define( [ 'jquery' ], defineBridget );\r\n} else if ( typeof exports === 'object' ) {\r\n  defineBridget( require('jquery') );\r\n} else {\r\n  // get jquery from browser global\r\n  defineBridget( window.jQuery );\r\n}\r\n\r\n})( window );\r\n/*!\r\n * Browswer CSS prefix detection snippet by David Walsh\r\n * http://davidwalsh.name/vendor-prefix\r\n */\r\n\r\nvar vendorPrefix = (function () {\r\n    var styles = window.getComputedStyle(document.documentElement, ''),\r\n        pre = (Array.prototype.slice\r\n            .call(styles)\r\n            .join('') \r\n            .match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o'])\r\n        )[1],\r\n        dom = ('WebKit|Moz|MS|O').match(new RegExp('(' + pre + ')', 'i'))[1];\r\n    return {\r\n        dom: dom,\r\n        lowercase: pre,\r\n        css: '-' + pre + '-',\r\n        js: pre[0].toUpperCase() + pre.substr(1)\r\n    };\r\n})();\r\n\r\n\r\nvar _ = {\r\n    'nodify': function ( map, selector, parent, prefix ) {\r\n        function create ( attributes, prefix ) {\r\n            var el = window.document.createElement( attributes.tagName );\r\n            if ( attributes.className.length > 0 )\r\n                el.className = ( typeof prefix === 'string' ) ?\r\n                               prefix + '-' + attributes.className :\r\n                               attributes.className;\r\n\r\n            return el;\r\n        }\r\n\r\n        function translate ( selector ) {\r\n            var info = selector.split('.');\r\n\r\n            if ( info.length == 1 )\r\n                return {\r\n                    tagName   : 'div',\r\n                    className : info[0]\r\n                }\r\n            else\r\n                return {\r\n                    tagName   : info[0],\r\n                    className : info[1]\r\n                }\r\n        }\r\n\r\n        function isNode ( el ) {\r\n            return (typeof el === 'object' &&\r\n                    typeof el.appendChild === typeof Function);\r\n        }\r\n\r\n        var attributes = translate( selector ),\r\n            el;\r\n\r\n        if ( isNode( parent ) ) {\r\n            el = create( attributes, prefix );\r\n            parent.appendChild( el );\r\n        } else\r\n            el = create( attributes );\r\n\r\n        if ( typeof map === 'object' )\r\n            for (node in map)\r\n                _.nodify( map[node], node, el, prefix || selector );\r\n        else\r\n            _.nodify( null, map, el, prefix || selector );\r\n\r\n        return el;\r\n    },\r\n    byClass: function ( class, parent ) {\r\n        var parent = parent || window.document;\r\n\r\n        return parent.getElementsByClassName( class )[0] || false;\r\n    },\r\n    rotate: function ( element, angle ) {\r\n        element.style.transform =\r\n        element.style[vendorPrefix.lowercase + 'Transform'] = 'rotate(' + angle + 'deg)';\r\n    },\r\n    addClass: function ( element, className ) {\r\n        var classList = element.className.split( ' ' );\r\n\r\n        if ( classList.indexOf( className ) == -1 )\r\n            classList.push( className );\r\n\r\n        element.className = classList.join( ' ' );\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// Main Redline class\r\nfunction Redline ( element, options ) {\r\n\r\n    // default values\r\n    var defaults = {\r\n        aperture    : 260,\r\n        marks       : [0, 1, 2, 3, 4, 5, 6],\r\n        innerMarks  : false,\r\n        position    : 0\r\n    }\r\n\r\n    // DOM elements \r\n    this.el = element;\r\n\r\n    if ( window.jQuery )\r\n        this.$el = window.jQuery( this.el );\r\n\r\n    this.attributes = defaults;\r\n\r\n    this._extend( options )\r\n        ._processMarks()\r\n        ._calculateAngle()\r\n        ._init();\r\n\r\n}\r\n\r\n// getter method\r\nRedline.prototype.get = function ( key ) {\r\n    return this.attributes[key];\r\n}\r\n\r\n// setter method\r\nRedline.prototype.set = function ( key, value ) {\r\n    if ( typeof key === 'object' )\r\n        return this._extend( key );\r\n\r\n    this.attributes[key] = value;\r\n\r\n    return this;\r\n}\r\n\r\n// sets multiple values\r\nRedline.prototype._extend = function ( obj ) {\r\n    var i = 0;\r\n\r\n    if ( typeof obj === 'object' )\r\n        for ( i in obj )\r\n            this.set(i, obj[i]);\r\n\r\n    return this;\r\n}\r\n\r\n// handles marks array\r\nRedline.prototype._processMarks = function ( marks ) {\r\n    var marks = marks || this.get( 'marks' );\r\n\r\n    for ( var index in marks )\r\n        if ( typeof marks[index] != 'object' )\r\n            marks[index] = { caption: marks[index].toString() };\r\n\r\n    var length = marks.length;\r\n    if ( !marks[length - 2].type )\r\n        marks[length - 2].type = 'warning';\r\n\r\n    if ( !marks[length - 1].type )\r\n        marks[length - 1].type = 'danger';\r\n\r\n    return this;\r\n}\r\n\r\n\r\n// creates segment\r\nRedline.prototype._createSegment = function ( width, angle, index, loop ) {\r\n    var width  = width || 0,\r\n        angle  = angle || 0,\r\n        prefix = 'redline-dial-segment',\r\n        map    = {\r\n            'wrap': {\r\n                'wrap-wrap': 'line'\r\n            },\r\n            'mark': {\r\n                'mark-wrap': 'span.'\r\n            }\r\n        },\r\n        segment = _.nodify( map, prefix ),\r\n        mark    = this.get( 'marks' )[index];\r\n\r\n    // first let's rotate the segment\r\n    _.rotate( segment, angle );\r\n\r\n    // add class to it\r\n    if ( typeof mark.type != 'undefined' )\r\n        _.addClass( segment, prefix + '-' + mark.type );\r\n\r\n    // then rotate wraps to acheive desired width \r\n    var outer   = _.byClass( prefix + '-wrap', segment ),\r\n        inner   = _.byClass( prefix + '-wrap-wrap', outer ),\r\n        caption = _.byClass( prefix + '-mark-wrap', segment );\r\n\r\n    if ( ( index == 0 || index == this.get( 'marks' ).length - 1 ) && !loop )\r\n        _.rotate( inner, -width/2 );\r\n    else\r\n        _.rotate( inner, -width );\r\n\r\n    if ( index == ( this.get( 'marks' ).length - 1 ) && !loop )\r\n        _.rotate( outer, 0 );\r\n    else\r\n        _.rotate( outer, width/2 );\r\n\r\n\r\n    // then rotate caption back to horizontal\r\n    _.rotate( caption, -angle );\r\n\r\n    console.log(caption);\r\n\r\n    // then align ling captions\r\n    if ( mark.caption.toString().length > 1 ) {\r\n        if ( index < this.get( 'marks' ).length / 2 )\r\n            _.addClass( caption, prefix + '-mark-left-fit' );\r\n        else\r\n            _.addClass( caption, prefix + '-mark-right-fit' );\r\n    }\r\n\r\n    caption.getElementsByTagName( 'span' )[0].innerHTML = mark.caption;\r\n\r\n    return segment;\r\n}\r\n\r\n// calculates actual hand angle\r\nRedline.prototype._calculateAngle = function ( angle, position, getter ) {\r\n\r\n    var aperture   = angle    || this.get('aperture'),\r\n        position   = position || this.get('position'),\r\n        noLoop     = 1 * ( aperture != 360 ),\r\n        percentage = position / ( this.get('marks').length - noLoop );\r\n        handAngle  = ( 360 - aperture ) / 2 + aperture * percentage;\r\n\r\n    if ( getter )\r\n        return handAngle;\r\n\r\n    return this.set('handAngle', handAngle);\r\n}\r\n\r\n// moves the arrow to specific angle\r\nRedline.prototype.moveHand = function ( angle ) {\r\n    var angle = angle || this.get('handAngle');\r\n\r\n    _.rotate( this.handEl, angle );\r\n\r\n    return this;\r\n}\r\n\r\n\r\n// sets angles\r\nRedline.prototype.render = function () {\r\n    var aperture = this.get( 'aperture' ),\r\n        marks    = this.get( 'marks' ),\r\n        noLoop   = 1 * ( aperture != 360 ),\r\n        width    = aperture / (marks.length - noLoop);\r\n        prefix   = 'redline',\r\n        map      = {\r\n            'dial' : null,\r\n            'hand' : {\r\n                'hand-wrap' : {\r\n                    'hand-arrow'  : null,\r\n                    'hand-center' : null\r\n                }\r\n            }\r\n        },\r\n        redline  = _.nodify( map, prefix );\r\n\r\n    this.el.innerHTML = '';\r\n    this.el.appendChild( redline );\r\n    this.el = redline;\r\n\r\n    this.handEl = _.byClass( 'redline-hand-wrap', this.el );\r\n\r\n    var dial     = _.byClass( 'redline-dial', this.el );\r\n\r\n    for ( var index in marks ) {\r\n        angle = this._calculateAngle(null, index, true);\r\n        segment = this._createSegment( width, angle, index, aperture == 360 );\r\n\r\n        console.log(index);\r\n\r\n        dial.appendChild( segment );\r\n    }\r\n\r\n    if ( this.get( 'innerMarks' ) )\r\n        _.addClass( this.el, 'redline-inner-marks' );\r\n\r\n    return this;\r\n}\r\n\r\nRedline.prototype._init = Redline.prototype.render;\r\n\r\n\r\nRedline.prototype.point = function ( index ) {\r\n    return this.set('position', index)\r\n               ._calculateAngle()\r\n               .moveHand();\r\n}\r\n\r\nif ( typeof noGlobal === typeof undefined ) {\r\n    window.Redline = Redline;\r\n}\r\n\r\n/* Converting to jquery plugin */\r\nif ( window.jQuery && window.jQuery.bridget ) {\r\n    jQuery.bridget( 'redline', Redline );\r\n}\r\n\r\nreturn Redline;\r\n\r\n}));"],"sourceRoot":"/source/"}